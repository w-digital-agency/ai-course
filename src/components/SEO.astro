---
export interface Props {
  title: string;
  description: string;
  keywords?: string;
  image?: string;
  url?: string;
  type?: string;
  author?: string;
  publishedTime?: string;
  modifiedTime?: string;
  structuredData?: object;
}

const {
  title,
  description,
  keywords = "AI digital marketing, performance marketing, business automation, Hong Kong digital agency, marketing solutions",
  image = "https://wdigital.s3.ap-southeast-1.amazonaws.com/images/W-Digital-og-image.png",
  url = Astro.url.href,
  type = "website",
  author = "WDigital Agency",
  publishedTime,
  modifiedTime,
  structuredData
} = Astro.props;

const siteName = "WDigital - AI Consultation & Digital Agency";
const canonicalUrl = url.replace(/\/$/, ''); // Remove trailing slash
---

<!-- Primary Meta Tags -->
<title>{title}</title>
<meta name="title" content={title} />
<meta name="description" content={description} />
<meta name="keywords" content={keywords} />
<meta name="author" content={author} />
<meta name="robots" content="index, follow" />
<meta name="language" content="en" />
<meta name="generator" content={Astro.generator} />

<!-- Canonical URL -->
<link rel="canonical" href={canonicalUrl} />

<!-- Open Graph / Facebook -->
<meta property="og:type" content={type} />
<meta property="og:url" content={canonicalUrl} />
<meta property="og:title" content={title} />
<meta property="og:description" content={description} />
<meta property="og:image" content={image} />
<meta property="og:site_name" content={siteName} />
<meta property="og:locale" content="en_HK" />
{image && (
  <>
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:image:type" content="image/png" />
  </>
)}
{publishedTime && <meta property="article:published_time" content={publishedTime} />}
{modifiedTime && <meta property="article:modified_time" content={modifiedTime} />}

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image" />
<meta property="twitter:url" content={canonicalUrl} />
<meta property="twitter:title" content={title} />
<meta property="twitter:description" content={description} />
<meta property="twitter:image" content={image} />
<meta name="twitter:creator" content="@wdigital_hk" />

<!-- Additional Meta Tags -->
<meta name="theme-color" content="#1E40AF" />
<meta name="msapplication-TileColor" content="#1E40AF" />

<!-- Geo Meta Tags for Local SEO -->
<meta name="geo.region" content="HK" />
<meta name="geo.placename" content="Hong Kong" />
<meta name="geo.position" content="22.3193;114.1694" />
<meta name="ICBM" content="22.3193, 114.1694" />

<!-- Structured Data (JSON-LD) -->
{structuredData && (
  <script type="application/ld+json" set:html={JSON.stringify(structuredData)} />
)}

<!-- Default Organization Structured Data -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "WDigital",
  "alternateName": "WDigital Agency",
  "url": "https://www.wdigital.tech",
  "logo": "https://wdigital.s3.ap-southeast-1.amazonaws.com/images/W-Digital-logo.png",
  "description": "AI-powered digital marketing agency specializing in performance marketing, business automation, and growth strategies in Hong Kong.",
  "address": {
    "@type": "PostalAddress",
    "addressLocality": "Hong Kong",
    "addressCountry": "HK"
  },
  "contactPoint": {
    "@type": "ContactPoint",
    "contactType": "Customer Service",
    "availableLanguage": ["English", "Chinese"]
  },
  "sameAs": [
    "https://www.linkedin.com/company/wdigital-hk",
    "https://www.facebook.com/wdigital.hk"
  ],
  "areaServed": {
    "@type": "Place",
    "name": "Hong Kong"
  },
  "serviceType": [
    "Digital Marketing",
    "AI Consultation", 
    "Performance Marketing",
    "Business Automation"
  ]
}
</script>